<div class="dashboard-container">
    <aside class="sidebar">
        <div class="filters">
            <input type="text" placeholder="Search by name or symbol..." [(ngModel)]="searchTerm"
                (input)="applyFilters()" />

            <select [(ngModel)]="selectedIndustry" (change)="applyFilters()">
                <option value="">All Industries</option>
                <option *ngFor="let ind of industries" [value]="ind">{{ ind }}</option>
            </select>

            <select [(ngModel)]="priceOrder" (change)="applyFilters()">
                <option value="">Sort by Price</option>
                <option value="high">High to Low</option>
                <option value="low">Low to High</option>
            </select>

        </div>

        <div class="stock-scroll">
            <div class="stock-card" *ngFor="let stock of filteredStocks" (click)="selectStock(stock)"
                [class.active]="stock === selectedStock">
                <div class="stock-header">
                    <h3>{{ stock.symbol }}</h3>
                    <span [ngClass]="{positive: stock.change > 0, negative: stock.change < 0}">
                        {{ stock.change > 0 ? '+' : '' }}{{ stock.change | number:'1.2-2' }}
                    </span>
                </div>
                <div class="stock-meta">
                    <div><strong>{{ stock.name }}</strong></div>
                    <div>${{ stock.currentPrice.toFixed(2) }}</div>
                    <div><em>{{ stock.industry }}</em></div>
                </div>
            </div>
        </div>
    </aside>

    <section class="chart-section" *ngIf="selectedStock" #chartSection>
        <h3 class="chart-title">{{ selectedStock.symbol }} Price History</h3>
        <div class="range-buttons">
            <button (click)="setRange(7)">7 Days</button>
            <button (click)="setRange(30)">30 Days</button>
            <button (click)="setRange(90)">90 Days</button>
        </div>
        <canvas baseChart [data]="chartData" [options]="chartOptions" type="line"></canvas>
    </section>
</div>
